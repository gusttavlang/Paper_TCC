\documentclass[review,preprint,12pt]{elsarticle}
\usepackage{graphicx}
\usepackage{amssymb,amsmath}
\usepackage{subfigure}
\usepackage{makeidx}
\usepackage{booktabs,ctable,tabulary,multirow,color}
\usepackage{nomencl}
\usepackage{textcomp}
\usepackage{colortbl}

\newcommand{\varA}[1]{{\operatorname{#1}}}
\newcommand{\varB}[1]{{\operatorname{\mathit{#1}}}}

\makenomenclature

\RequirePackage{ifthen}
\renewcommand{\nomgroup}[1]{%
\ifthenelse{\equal{#1}{A}}{\item[\textbf{Roman letters}]}{%
\ifthenelse{\equal{#1}{B}}{\item[\textbf{Greek letters}]}{}}{%
\ifthenelse{\equal{#1}{C}}{\item[\textbf{Subscripts}]}{}}{%
\ifthenelse{\equal{#1}{D}}{\item[\textbf{Abbreviations}]}{}}}

\journal{Applied Thermal Engineering}

\begin{document}

\begin{frontmatter}

\title{Development of an Active Magnetic Regenerator Model in Python using the Finite Volume Method}
\author{Gusttav B. Lang}
\author{Jaime A. L. Cadena}
\author{Alan T. D. Nakashima}
\author{Jader R. Barbosa Jr.}
\ead{jrb@polo.ufsc.br}
\address{POLO Research Laboratories for Emerging Technologies in Cooling and Thermophysics, Department of Mechanical Engineering, Federal University of Santa Catarina (UFSC), Florian\'{o}polis, SC, 88040900, Brazil, Phone/Fax: (+ 55) 48 3721-7900}

\begin{abstract}

Falar que Ã© open source e a importancia disso

\end{abstract}

\end{frontmatter}

\vspace{0.5cm}

\noindent {\bf Keywords:} Magnetic refrigeration, active magnetic regenerator (AMR), finite volume method (FVM), Python.

\printnomenclature[1.4cm]

\pagebreak

\section{Introduction}

multicamadas com primeira ordem?


\section{Mathematical Model}

4 equacoes + multilayer


As a volume average approach was adopted, the macroscopic momentum equation is given by \cite{Kaviany1995,Nield2006}:

\begin{equation}
\frac{\rho_\textrm{f}}{\varepsilon}\Biggl(\frac{\partial\vec{v}}{\partial t} + \vec{v}\cdot\nabla\vec{v}\Biggr) = -\nabla P + \rho_\textrm{f}\vec{\textrm{f}} + \frac{\mu_\textrm{f}}{\varepsilon}\nabla^2\vec{v} - \frac{\mu_\textrm{f}}{K}\vec{v} -
\frac{c_\textrm{E}\rho_\textrm{f}}{K^{1/2}}|\vec{v}|\vec{v}
\label{BrinkFroch}
\end{equation}

\noindent where the left term is the macroscopic inertial force and the terms on the right represent the pore pressure gradient, body force, macroscopic viscous shear stress (Brinkman viscous term), microscopic shear stress (Darcy term) and microscopic inertial force (Ergun inertial term), respectively. The following simplifying assumptions were also made \cite{Trevizoli2015}:

\begin{enumerate}
\item  One dimensional flow;
\item  Laminar, incompressible fluid flow;
\item  Low porosity medium, i.e., $\varepsilon <$ 0.6;
\item  Absence of body forces.
\end{enumerate}

After the application of the former assumptions in Eq.~\eqref{BrinkFroch}, it is obtained:

\begin{equation}
\frac{\rho_\textrm{f}}{\varepsilon}\Biggl(\frac{\partial u}{\partial t}\Biggr) = -\frac{\partial P}{\partial x} - \frac{\mu_\textrm{f}}{K}u - \frac{c_\textrm{E}\rho_\textrm{f}}{K^{1/2}}|u|u
\label{BrinkFrochSimplified}
\end{equation}

\noindent where $\rho$ is the density, $u$ is the superficial (Darcian) flow velocity, $t$ is the time, $P$ is the pressure, $x$ is the regenerator axial direction, $\mu$ is the dynamic viscosity, $K$ is the permeability of the porous media and $c_{E}$ is the Ergun constant. $K$ and $c_{E}$ depends on the solid geometry and the matrix  porosity. \textcolor{red}{In this thesis, only packed bed of spheres will be evaluated, for which these variables are calculated as \cite{Ergun1952}:}


The macroscopic energy balance for the solid phase is given by \cite{Engelbrecht2004,Trevizoli2015}:

\begin{equation}
\rho_\textrm{s} c_\textrm{H}(T,H)(1-\varepsilon)\frac{\partial T_\textrm{s}}{\partial t} = h(x) \beta (T_\textrm{f}-T_\textrm{s}) + (1-\varepsilon)k^\textrm{eff}_\textrm{s}\frac{\partial^{2} T_\textrm{s}}{\partial x^{2}} + \dot{q}_\textrm{MCE}
\label{SolidEnergyEquation}
\end{equation}

\noindent where the term on is the solid thermal inertia, and the terms on the right are due to interstitial heat convection calculated using a convective heat transfer coefficient, $h$, which is responsible for the thermal couple between the solid and fluid phases, axial heat conduction and the magnetocaloric effect modeled as a source term (if applicable), respectively. $\rho_\textrm{s}$ is the solid density and $k^\textrm{eff}_\textrm{s}$ is the effective thermal conductivity of the solid \cite{Kaviany1995,Nield2006}. $\beta$ (or compactness factor) is the surface area density, defined as the ratio of the interstitial area, which for packed bed spheres it is given by \cite{Kaviany1995}:


As the momentum equation is solved uncoupled, the flow velocity and pressure drop are an input in the fluid energy solver. All of the assumptions made in the momentum equation are also applied for the solid and fluid energy equations, except that $\mu_\textrm{f}$ is not considered constant, since in the range of $\Delta T_\textrm{span}$ used in this thesis $\mu_\textrm{f}$ can vary over five time. The macroscopic energy balance for the fluid phase is given by \cite{Engelbrecht2004,Trevizoli2015}:

\begin{equation}
\rho_\textrm{f} c_\textrm{p,f}(T) \left( \varepsilon \frac{\partial T_\textrm{f}}{\partial t} +  u\frac{\partial T_\textrm{f}}{\partial x} \right) = h(x)\beta(T_\textrm{s}-T_\textrm{f})  + \Biggl|u\frac{\partial P}{\partial x}\Biggr| + \nonumber
\end{equation}
\begin{equation}
\varepsilon\bigl[k^\textrm{eff}_\textrm{f} + \rho_\textrm{f}(T) c_\textrm{p,f}(T)D_{||}\bigr]\frac{\partial^{2} T_\textrm{f}}{\partial x^{2}} +  \dot{q}_\textrm{csg}
\label{FluidEnergyEquation}
\end{equation}

\noindent where the terms on the left are the thermal inertia and axial advection, and the terms on the right are the interstitial heat convection term, the viscous dissipation, the axial conduction and the casing heat transfer terms, respectively \cite{Kaviany1995, Nield2006}. $c_\textrm{p,f}$ is the fluid specific heat capacity, $k^\textrm{eff}_\textrm{f}$ is the the fluid phase effective thermal conductivity and $D_{||}$ is the longitudinal thermal dispersion, proper of porous medium analyses.

The casing heat transfer modeling main goal is to determine the heat transfer rate per unit volume through the regenerator casing wall, $\dot{q}_\textrm{csg}$. This loss is  very important for an AMR model, because there is little room for a good thermal insulation and, as a result, the heat gained from the external environment can deteriorate the AMR performance \cite{Engelbrecht2008,Trevizoli2014,Trevizoli2016b}. Moreover, the inclusion of this model enables the optimization of the casing thickness for specific geometry conditions. $\dot{q}_\textrm{csg}$ was included as a source term in the fluid energy equation Eq.~\eqref{FluidEnergyEquation}. 

The following assumptions are considered in the casing heat transfer modeling \cite{Trevizoli2015}:

\begin{enumerate}
\item  The heat transfer in the wall and air gap is two-dimensional;
\item  The air properties are constant and obtained at an average air temperature;
\item  The wall properties are constant and depend only on the wall material. However, the transversal and longitudinal thermal conductivities can be different (anisotropic characteristic). Thus, for the G10 casing $k_\textrm{wall,y} \neq k_\textrm{wall,x}$.
\item  Since the thermal mass of the magnetic circuit is very large, the temperature of the magnet is assumed constant.
\item The curvature of the regenerator wall for the cylindrical case is negligible so that a Cartesian coordinate system can be used to describe the problem geometry;
\end{enumerate}

Applying these assumptions, the casing energy equation is given by:


\begin{equation}
\rho_\textrm{csg} c_\mathrm{p,csg}\frac{\partial T_\textrm{csg}}{\partial t} = \frac{\partial}{\partial y}\Bigg(k_\mathrm{y}\frac{\partial T_\textrm{csg}}{\partial y}\Bigg) + \frac{\partial}{\partial x}\Bigg(k_\mathrm{x}\frac{\partial T_\textrm{csg}}{\partial x}\Bigg)
\label{EnergyEquation_Casing}
\end{equation}

The main problem in the casing model lies in the coupling between the two-dimensional casing energy equation, and the one-dimensional fluid energy equation Eq.~\eqref{FluidEnergyEquation}. To obtain a consistent model, continuity heat flux between fluid and casing must be respected. Thus, the heat flux, when the velocity is not zero, is given by:

\begin{equation}
q\textrm{"}_\textrm{csg} =  h_\textrm{csg}(T_\textrm{csg}|_\textrm{(y=0)} - T_\textrm{f})
\label{Q_HTwall}
\end{equation}

For a no-flow condition, fluid-casing boundary is assumed adiabatic, since the heat flux for pure conduction is much smaller than for convection. Therefore, Eq.~\eqref{Q_HTwall} represents the boundary condition for the casing energy equation Eq.~\eqref{EnergyEquation_Casing}. But, as the fluid energy equation is one-dimensional, this heat flux must be the source term, $\dot{q}_\textrm{csg}$. Thus:

\begin{equation}
\dot{q}_\textrm{csg} = \frac{q\textrm{"}_\textrm{csg}A_\textrm{wet}}{V}
\label{Q_csg}
\end{equation}

\noindent where $A_\textrm{wet}$ is the wet area of the regenerator and $V$ is the volume of the AMR. Thus, for a cylindrical regenerator, the source term $\dot{q}_\textrm{csg}$ would be given by:

\begin{equation}
\dot{q}_\textrm{csg} = \frac{ h_\textrm{csg}(T_\textrm{csg}|_\textrm{(y=0)} - T_\textrm{f})2\pi rL}{\pi r^2L}
\label{Q_csg_cylindrical}
\end{equation}

\noindent where $r$ is the cylinder radius and $L$ is the regenerator length.

\subsection{Implementation of the Magnetocaloric Effect}


\subsection{Magnetic Losses due to Demagnetizing Effects}

\section{Numerical Implementation}
\textcolor{red}{Descrever todos os coeficientes?}

\subsection{Multilayer Implementation?}

\textcolor{red}{Colocar propriedades dos materiais?}

\textcolor{red}{colocar no apendice rotina de solucao}



\section{Energy Conservation}
mesh validation?

\subsection{Solid Domain}

\subsection{Fluid Domain}

\subsection{Casing Domain}



\section{Results and Discussion}

\subsection{MCE and Losses Validation}

\textcolor{red}{Colocar perfis de temperatura mesmo sem modelo de volume morto?}

\subsection{Blow Fraction Validation}

\textcolor{red}{Se colocar essa seÃ§Ã£o precisa explicar em algum lugar o conceito de blow fraction}



\subsection{Blow Fraction Validation}

\textcolor{red}{acho que nao da pra colocar essa secao pq sao os mesmo resultados do paper do henrique}


\subsection{First Order Materials Results}

\textcolor{red}{nao tem comparacao experimental, nao sei se adianta colocar essa seÃ§Ã£o}

\section{Conclusions}


\section*{References}

\bibliographystyle{elsarticle-num}


\bibliography{References_gusttav}

\end{document}